!function(a){"use strict";a(document).ready(function(){a(".wtsfc-settings .mailchimp-api-key").on("keyup",function(){var b=""==a(this).val()?!0:!1;a(".wtsfc-settings .mailchimp-get-lists-button").prop("disabled",b)}),a(".wtsfc-settings .mailchimp-get-lists-button").on("click",function(b){b.preventDefault();var c=a(this),d=a(".wtsfc-settings .mailchimp-api-key").val();c.prop("disabled",!0).attr("value","Getting Lists").after('<img class="loading-icon" src="'+wtsfc_params.loading_img+'" />');var e={action:"wtsfc_get_mailchimp_lists",security:wtsfc_params.security,api_key:d};a.ajax({type:"POST",url:wtsfc_params.ajax_url,cache:!1,dataType:"json",data:e,success:function(b){if(c.next().remove(),null!==b){var b=a.parseJSON(b);1==b.success?(console.log(b),c.after('<select name="wtsfc_settings[wtsfc_mailchimp_list]" id="mailchimp_list"></select>'),a.each(b.lists.data,function(b,c){a("select#mailchimp_list").append('<option value="'+c.id+'">'+c.name+"</option>")}),c.remove()):1==b.error&&(c.after('<div class="error">'+b.reason+"</div>"),c.prop("disabled",!1))}}})}),a(".wtsfc-settings #mailchimp_list").on("change",function(b){b.preventDefault(),a(this).siblings(".list-id").remove(),a(this).after('<em class="description list-id">This list\'s ID is <strong>'+a(this).val()+"</strong>.</em>")}),a(".wtsfc-settings #mailchimp_group").on("change",function(b){b.preventDefault();var c=a(this).find("option:selected").val();a(".wtsfc-settings ul.interests").css("display","none"),"none"!==c?(a(".wtsfc-settings .interests-description").css("display","block"),a(".wtsfc-settings ul.interests-"+c).css("display","block")):a(".wtsfc-settings .interests-description").css("display","none")})})}(jQuery);